<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>6 Control Flow | elixir-notes</title>
<meta name="author" content="Qiushi">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="6 Control Flow | elixir-notes">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="6 Control Flow | elixir-notes">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style.css">
<meta name="description" content="6.1 if-else block if condition do   ... else   ... end condense into one line (notice the comma , after condition, similar to oneline function def fun(), do: expresion) if condition, do:...">
<meta property="og:description" content="6.1 if-else block if condition do   ... else   ... end condense into one line (notice the comma , after condition, similar to oneline function def fun(), do: expresion) if condition, do:...">
<meta name="twitter:description" content="6.1 if-else block if condition do   ... else   ... end condense into one line (notice the comma , after condition, similar to oneline function def fun(), do: expresion) if condition, do:...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">elixir-notes</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Preface</a></li>
<li><a class="" href="data-types.html"><span class="header-section-number">2</span> Data Types</a></li>
<li><a class="" href="pattern-matching.html"><span class="header-section-number">3</span> Pattern Matching</a></li>
<li><a class="" href="functions-and-modules.html"><span class="header-section-number">4</span> Functions and Modules</a></li>
<li><a class="" href="enum-module.html"><span class="header-section-number">5</span> Enum Module</a></li>
<li><a class="active" href="control-flow.html"><span class="header-section-number">6</span> Control Flow</a></li>
<li><a class="" href="miscellaneous-features.html"><span class="header-section-number">7</span> Miscellaneous Features</a></li>
<li><a class="" href="project-management-with-mix.html"><span class="header-section-number">8</span> Project Management with Mix</a></li>
<li class="book-part">Concurrency in Elixir</li>
<li><a class="" href="concurrency-basics.html"><span class="header-section-number">9</span> Concurrency Basics</a></li>
<li class="book-part">Phoenix</li>
<li><a class="" href="phoenix-basics.html"><span class="header-section-number">10</span> Phoenix Basics</a></li>
<li><a class="" href="ecto-orm.html"><span class="header-section-number">11</span> Ecto ORM</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/qiushiyan/elixir-notes">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="control-flow" class="section level1" number="6">
<h1>
<span class="header-section-number">6</span> Control Flow<a class="anchor" aria-label="anchor" href="#control-flow"><i class="fas fa-link"></i></a>
</h1>
<div id="if-else-block" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> if-else block<a class="anchor" aria-label="anchor" href="#if-else-block"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb65"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb65-1"><a href="control-flow.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> condition <span class="kw">do</span></span>
<span id="cb65-2"><a href="control-flow.html#cb65-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb65-3"><a href="control-flow.html#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb65-4"><a href="control-flow.html#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb65-5"><a href="control-flow.html#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<p>condense into one line (notice the comma <code>,</code> after condition, similar to oneline function <code>def fun(), do: expresion</code>)</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb66-1"><a href="control-flow.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> condition, <span class="kw">do</span>: true_value, <span class="cf">else</span>: false_value</span></code></pre></div>
</div>
<div id="cond-multiple-if-else-blocks" class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> cond: multiple if-else blocks<a class="anchor" aria-label="anchor" href="#cond-multiple-if-else-blocks"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb67"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb67-1"><a href="control-flow.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="cf">cond</span> <span class="kw">do</span></span>
<span id="cb67-2"><a href="control-flow.html#cb67-2" aria-hidden="true" tabindex="-1"></a>  expression_1 <span class="op">-&gt;</span> return_1</span>
<span id="cb67-3"><a href="control-flow.html#cb67-3" aria-hidden="true" tabindex="-1"></a>  expression_2 <span class="op">-&gt;</span> return_2</span>
<span id="cb67-4"><a href="control-flow.html#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb67-5"><a href="control-flow.html#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
</div>
<div id="case-case-when-with-pattern-matching" class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> case: case when with pattern matching<a class="anchor" aria-label="anchor" href="#case-case-when-with-pattern-matching"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb68"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb68-1"><a href="control-flow.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="kw">case</span> expression <span class="kw">do</span></span>
<span id="cb68-2"><a href="control-flow.html#cb68-2" aria-hidden="true" tabindex="-1"></a>  pattern_1 <span class="op">-&gt;</span> return_1</span>
<span id="cb68-3"><a href="control-flow.html#cb68-3" aria-hidden="true" tabindex="-1"></a>  pattern_2 <span class="op">-&gt;</span> return_2</span>
<span id="cb68-4"><a href="control-flow.html#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb68-5"><a href="control-flow.html#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<div class="sourceCode" id="cb69"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb69-1"><a href="control-flow.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> max(a,b) <span class="kw">do</span></span>
<span id="cb69-2"><a href="control-flow.html#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">case</span> a <span class="op">&gt;=</span> b <span class="kw">do</span></span>
<span id="cb69-3"><a href="control-flow.html#cb69-3" aria-hidden="true" tabindex="-1"></a>    <span class="cn">true</span> <span class="op">-&gt;</span> a</span>
<span id="cb69-4"><a href="control-flow.html#cb69-4" aria-hidden="true" tabindex="-1"></a>    <span class="cn">false</span> <span class="op">-&gt;</span> b</span>
<span id="cb69-5"><a href="control-flow.html#cb69-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb69-6"><a href="control-flow.html#cb69-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
</div>
<div id="with-combine-multiple-clauses" class="section level2" number="6.4">
<h2>
<span class="header-section-number">6.4</span> with: combine multiple clauses<a class="anchor" aria-label="anchor" href="#with-combine-multiple-clauses"><i class="fas fa-link"></i></a>
</h2>
<p>Used to combine matching clauses. Let’s start with an example:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb70-1"><a href="control-flow.html#cb70-1" aria-hidden="true" tabindex="-1"></a>opts <span class="op">=</span> %{<span class="va">width:</span> <span class="dv">10</span>, <span class="va">height:</span> <span class="dv">15</span>}</span>
<span id="cb70-2"><a href="control-flow.html#cb70-2" aria-hidden="true" tabindex="-1"></a>with {<span class="va">:ok</span>, width} <span class="op">&lt;-</span> <span class="cn">Map</span><span class="op">.</span>fetch(opts, <span class="va">:width</span>),</span>
<span id="cb70-3"><a href="control-flow.html#cb70-3" aria-hidden="true" tabindex="-1"></a>     {<span class="va">:ok</span>, height} <span class="op">&lt;-</span> <span class="cn">Map</span><span class="op">.</span>fetch(opts, <span class="va">:height</span>) <span class="kw">do</span></span>
<span id="cb70-4"><a href="control-flow.html#cb70-4" aria-hidden="true" tabindex="-1"></a>  {<span class="va">:ok</span>, width <span class="op">*</span> height}</span>
<span id="cb70-5"><a href="control-flow.html#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb70-6"><a href="control-flow.html#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; {:ok, 150}</span></span></code></pre></div>
<p>If all clauses match, the do block is executed, returning its result. Otherwise the chain is aborted and the non-matched value is returned:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb71-1"><a href="control-flow.html#cb71-1" aria-hidden="true" tabindex="-1"></a>opts <span class="op">=</span> %{<span class="va">width:</span> <span class="dv">10</span>}</span>
<span id="cb71-2"><a href="control-flow.html#cb71-2" aria-hidden="true" tabindex="-1"></a>with {<span class="va">:ok</span>, width} <span class="op">&lt;-</span> <span class="cn">Map</span><span class="op">.</span>fetch(opts, <span class="va">:width</span>),</span>
<span id="cb71-3"><a href="control-flow.html#cb71-3" aria-hidden="true" tabindex="-1"></a>     {<span class="va">:ok</span>, height} <span class="op">&lt;-</span> <span class="cn">Map</span><span class="op">.</span>fetch(opts, <span class="va">:height</span>) <span class="kw">do</span></span>
<span id="cb71-4"><a href="control-flow.html#cb71-4" aria-hidden="true" tabindex="-1"></a>  {<span class="va">:ok</span>, width <span class="op">*</span> height}</span>
<span id="cb71-5"><a href="control-flow.html#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb71-6"><a href="control-flow.html#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; :error</span></span></code></pre></div>
<p>We can perform intermediate calculation during each pattern matching during <code>with</code>, and the matched pattern won’t affect global state</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb72-1"><a href="control-flow.html#cb72-1" aria-hidden="true" tabindex="-1"></a>width <span class="op">=</span> <span class="cn">nil</span></span>
<span id="cb72-2"><a href="control-flow.html#cb72-2" aria-hidden="true" tabindex="-1"></a>opts <span class="op">=</span> %{<span class="va">width:</span> <span class="dv">10</span>, <span class="va">height:</span> <span class="dv">15</span>}</span>
<span id="cb72-3"><a href="control-flow.html#cb72-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-4"><a href="control-flow.html#cb72-4" aria-hidden="true" tabindex="-1"></a>with {<span class="va">:ok</span>, width} <span class="op">&lt;-</span> <span class="cn">Map</span><span class="op">.</span>fetch(opts, <span class="va">:width</span>),</span>
<span id="cb72-5"><a href="control-flow.html#cb72-5" aria-hidden="true" tabindex="-1"></a>     double_width <span class="op">=</span> width <span class="op">*</span> <span class="dv">2</span>, <span class="co"># intermediate calculation</span></span>
<span id="cb72-6"><a href="control-flow.html#cb72-6" aria-hidden="true" tabindex="-1"></a>     {<span class="va">:ok</span>, height} <span class="op">&lt;-</span> <span class="cn">Map</span><span class="op">.</span>fetch(opts, <span class="va">:height</span>) <span class="kw">do</span></span>
<span id="cb72-7"><a href="control-flow.html#cb72-7" aria-hidden="true" tabindex="-1"></a>  {<span class="va">:ok</span>, double_width <span class="op">*</span> height}</span>
<span id="cb72-8"><a href="control-flow.html#cb72-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb72-9"><a href="control-flow.html#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; {:ok, 300}</span></span>
<span id="cb72-10"><a href="control-flow.html#cb72-10" aria-hidden="true" tabindex="-1"></a>width</span>
<span id="cb72-11"><a href="control-flow.html#cb72-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; nil</span></span></code></pre></div>
<p>Alternative way of using comprehension with pattern matching</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb73-1"><a href="control-flow.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> %{<span class="va">width:</span> width, <span class="va">height:</span> height} <span class="op">&lt;-</span> [opts] <span class="kw">do</span></span>
<span id="cb73-2"><a href="control-flow.html#cb73-2" aria-hidden="true" tabindex="-1"></a>  width <span class="op">*</span> height</span>
<span id="cb73-3"><a href="control-flow.html#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb73-4"><a href="control-flow.html#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [150]</span></span></code></pre></div>
</div>
<div id="comprehensions" class="section level2" number="6.5">
<h2>
<span class="header-section-number">6.5</span> comprehensions<a class="anchor" aria-label="anchor" href="#comprehensions"><i class="fas fa-link"></i></a>
</h2>
<p>In Elixir, it is common to loop over an Enumerable, often filtering out some results and mapping values into another list. Comprehensions are syntactic sugar for such constructs: they group those common tasks into the for special form.</p>
<p>For example, we can map a list of integers into their squared values:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb74-1"><a href="control-flow.html#cb74-1" aria-hidden="true" tabindex="-1"></a>iex<span class="op">&gt;</span> <span class="kw">for</span> n <span class="op">&lt;-</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>], <span class="kw">do</span>: n <span class="op">*</span> n</span>
<span id="cb74-2"><a href="control-flow.html#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1, 4, 9, 16]</span></span></code></pre></div>
<p>A comprehension is made of three parts: <strong>generators</strong>, <strong>filters</strong>, and <strong>collectables</strong>. Comprension is most useful when <strong>multiple enumerables</strong> are involved and <code>Enum.map</code> can’t do its job.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb75-1"><a href="control-flow.html#cb75-1" aria-hidden="true" tabindex="-1"></a>multiplication_table <span class="op">=</span> <span class="kw">for</span> x <span class="op">&lt;-</span> <span class="dv">1</span><span class="op">..</span><span class="dv">9</span>, y <span class="op">&lt;-</span> <span class="dv">1</span><span class="op">..</span><span class="dv">9</span>, <span class="co"># generaotr</span></span>
<span id="cb75-2"><a href="control-flow.html#cb75-2" aria-hidden="true" tabindex="-1"></a>              x <span class="op">&gt;=</span> y, <span class="co"># filter</span></span>
<span id="cb75-3"><a href="control-flow.html#cb75-3" aria-hidden="true" tabindex="-1"></a>              <span class="va">into:</span> %{} <span class="kw">do</span> <span class="co"># collectable</span></span>
<span id="cb75-4"><a href="control-flow.html#cb75-4" aria-hidden="true" tabindex="-1"></a>              {{x, y}, x<span class="op">*</span>y}</span>
<span id="cb75-5"><a href="control-flow.html#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb75-6"><a href="control-flow.html#cb75-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-7"><a href="control-flow.html#cb75-7" aria-hidden="true" tabindex="-1"></a>multiplication_table</span>
<span id="cb75-8"><a href="control-flow.html#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="co"># %{</span></span>
<span id="cb75-9"><a href="control-flow.html#cb75-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   {8, 5} =&gt; 40,</span></span>
<span id="cb75-10"><a href="control-flow.html#cb75-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   {8, 6} =&gt; 48,</span></span>
<span id="cb75-11"><a href="control-flow.html#cb75-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   {5, 2} =&gt; 10,</span></span>
<span id="cb75-12"><a href="control-flow.html#cb75-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   {6, 5} =&gt; 30,</span></span>
<span id="cb75-13"><a href="control-flow.html#cb75-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   {1, 1} =&gt; 1,</span></span>
<span id="cb75-14"><a href="control-flow.html#cb75-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   {9, 6} =&gt; 54,</span></span>
<span id="cb75-15"><a href="control-flow.html#cb75-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   {4, 3} =&gt; 12,</span></span>
<span id="cb75-16"><a href="control-flow.html#cb75-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   ...</span></span>
<span id="cb75-17"><a href="control-flow.html#cb75-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   {9, 7} =&gt; 63,</span></span>
<span id="cb75-18"><a href="control-flow.html#cb75-18" aria-hidden="true" tabindex="-1"></a><span class="co">#   {5, 1} =&gt; 5,</span></span>
<span id="cb75-19"><a href="control-flow.html#cb75-19" aria-hidden="true" tabindex="-1"></a><span class="co">#   {2, 2} =&gt; 4,</span></span>
<span id="cb75-20"><a href="control-flow.html#cb75-20" aria-hidden="true" tabindex="-1"></a><span class="co">#   {4, 4} =&gt; 16,</span></span>
<span id="cb75-21"><a href="control-flow.html#cb75-21" aria-hidden="true" tabindex="-1"></a><span class="co">#   {7, 4} =&gt; 28,</span></span>
<span id="cb75-22"><a href="control-flow.html#cb75-22" aria-hidden="true" tabindex="-1"></a><span class="co">#   {6, 3} =&gt; 18,</span></span>
<span id="cb75-23"><a href="control-flow.html#cb75-23" aria-hidden="true" tabindex="-1"></a><span class="co">#   {5, 4} =&gt; 20,</span></span>
<span id="cb75-24"><a href="control-flow.html#cb75-24" aria-hidden="true" tabindex="-1"></a><span class="co">#   {9, 9} =&gt; 81</span></span>
<span id="cb75-25"><a href="control-flow.html#cb75-25" aria-hidden="true" tabindex="-1"></a><span class="co"># }</span></span></code></pre></div>
<p>As you can see, when multiple generators are used, the result is a cartesian product of the enumerables.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb76-1"><a href="control-flow.html#cb76-1" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> <span class="op">~</span>w[<span class="cn">James</span> <span class="cn">John</span> <span class="cn">Patricia</span>]</span>
<span id="cb76-2"><a href="control-flow.html#cb76-2" aria-hidden="true" tabindex="-1"></a>surnames <span class="op">=</span> <span class="op">~</span>w[<span class="cn">Johnson</span> <span class="cn">Smith</span> <span class="cn">Williams</span>]</span>
<span id="cb76-3"><a href="control-flow.html#cb76-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-4"><a href="control-flow.html#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> name <span class="op">&lt;-</span> names,</span>
<span id="cb76-5"><a href="control-flow.html#cb76-5" aria-hidden="true" tabindex="-1"></a>    surname <span class="op">&lt;-</span> surnames <span class="kw">do</span></span>
<span id="cb76-6"><a href="control-flow.html#cb76-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"</span><span class="ot">#{</span>name<span class="ot">}</span><span class="st"> </span><span class="ot">#{</span>surname<span class="ot">}</span><span class="st">"</span></span>
<span id="cb76-7"><a href="control-flow.html#cb76-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb76-8"><a href="control-flow.html#cb76-8" aria-hidden="true" tabindex="-1"></a><span class="co"># =&gt; [</span></span>
<span id="cb76-9"><a href="control-flow.html#cb76-9" aria-hidden="true" tabindex="-1"></a><span class="co"># =&gt;   "James Johnson",</span></span>
<span id="cb76-10"><a href="control-flow.html#cb76-10" aria-hidden="true" tabindex="-1"></a><span class="co"># =&gt;   "James Smith",</span></span>
<span id="cb76-11"><a href="control-flow.html#cb76-11" aria-hidden="true" tabindex="-1"></a><span class="co"># =&gt;   "James Williams",</span></span>
<span id="cb76-12"><a href="control-flow.html#cb76-12" aria-hidden="true" tabindex="-1"></a><span class="co"># =&gt;   "John Johnson",</span></span>
<span id="cb76-13"><a href="control-flow.html#cb76-13" aria-hidden="true" tabindex="-1"></a><span class="co"># =&gt;   "John Smith",</span></span>
<span id="cb76-14"><a href="control-flow.html#cb76-14" aria-hidden="true" tabindex="-1"></a><span class="co"># =&gt;   "John Williams",</span></span>
<span id="cb76-15"><a href="control-flow.html#cb76-15" aria-hidden="true" tabindex="-1"></a><span class="co"># =&gt;   "Patricia Johnson",</span></span>
<span id="cb76-16"><a href="control-flow.html#cb76-16" aria-hidden="true" tabindex="-1"></a><span class="co"># =&gt;   "Patricia Smith",</span></span>
<span id="cb76-17"><a href="control-flow.html#cb76-17" aria-hidden="true" tabindex="-1"></a><span class="co"># =&gt;   "Patricia Williams"</span></span>
<span id="cb76-18"><a href="control-flow.html#cb76-18" aria-hidden="true" tabindex="-1"></a><span class="co"># =&gt; ]</span></span></code></pre></div>
<p>We can also use pattern matching in a generator to do filtering. If the left side of the generator does not match, then the for-loop will just ignore that value and continue to process.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb77-1"><a href="control-flow.html#cb77-1" aria-hidden="true" tabindex="-1"></a>people <span class="op">=</span> [</span>
<span id="cb77-2"><a href="control-flow.html#cb77-2" aria-hidden="true" tabindex="-1"></a>  %{<span class="va">name:</span> <span class="st">"John"</span>, <span class="va">active:</span> <span class="cn">true</span>},</span>
<span id="cb77-3"><a href="control-flow.html#cb77-3" aria-hidden="true" tabindex="-1"></a>  %{<span class="va">name:</span> <span class="st">"Patricia"</span>, <span class="va">active:</span> <span class="cn">false</span>}</span>
<span id="cb77-4"><a href="control-flow.html#cb77-4" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb77-5"><a href="control-flow.html#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> %{<span class="va">active:</span> <span class="cn">true</span>, <span class="va">name:</span> name} <span class="op">&lt;-</span> people <span class="kw">do</span></span>
<span id="cb77-6"><a href="control-flow.html#cb77-6" aria-hidden="true" tabindex="-1"></a>  name</span>
<span id="cb77-7"><a href="control-flow.html#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb77-8"><a href="control-flow.html#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="co"># =&gt; ["John"]</span></span></code></pre></div>
<p>We can also use pattern matching alongside with the individual looping element, suppose we need to loop through the following two list for state “CA” and get joined maps that looks like <code>%{id, state, description, address}</code>:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb78-1"><a href="control-flow.html#cb78-1" aria-hidden="true" tabindex="-1"></a>propositions <span class="op">=</span> [</span>
<span id="cb78-2"><a href="control-flow.html#cb78-2" aria-hidden="true" tabindex="-1"></a>  %{<span class="va">id:</span> <span class="dv">1</span>, <span class="va">state:</span> <span class="st">"CA"</span>, <span class="va">description:</span> <span class="st">"highway bond"</span>},</span>
<span id="cb78-3"><a href="control-flow.html#cb78-3" aria-hidden="true" tabindex="-1"></a>  %{<span class="va">id:</span> <span class="dv">2</span>, <span class="va">state:</span> <span class="st">"WA"</span>, <span class="va">description:</span> <span class="st">"Fuel Tax"</span>}</span>
<span id="cb78-4"><a href="control-flow.html#cb78-4" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb78-5"><a href="control-flow.html#cb78-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-6"><a href="control-flow.html#cb78-6" aria-hidden="true" tabindex="-1"></a>locations <span class="op">=</span> [</span>
<span id="cb78-7"><a href="control-flow.html#cb78-7" aria-hidden="true" tabindex="-1"></a>  %{<span class="va">id:</span> <span class="dv">1</span>, <span class="va">state:</span> <span class="st">"CA"</span>, <span class="va">address:</span> <span class="st">"123 Main St"</span>},</span>
<span id="cb78-8"><a href="control-flow.html#cb78-8" aria-hidden="true" tabindex="-1"></a>  %{<span class="va">id:</span> <span class="dv">2</span>, <span class="va">state:</span> <span class="st">"WA"</span>, <span class="va">address:</span> <span class="st">"321 Main St"</span>}</span>
<span id="cb78-9"><a href="control-flow.html#cb78-9" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb78-10"><a href="control-flow.html#cb78-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-11"><a href="control-flow.html#cb78-11" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> x <span class="op">=</span> %{<span class="va">state:</span> stateA} <span class="op">&lt;-</span> propositions,</span>
<span id="cb78-12"><a href="control-flow.html#cb78-12" aria-hidden="true" tabindex="-1"></a>      y <span class="op">=</span> %{<span class="va">state:</span> stateB} <span class="op">&lt;-</span> locations,</span>
<span id="cb78-13"><a href="control-flow.html#cb78-13" aria-hidden="true" tabindex="-1"></a>      stateA <span class="op">===</span> <span class="st">"CA"</span> <span class="op">&amp;&amp;</span> stateB <span class="op">===</span> <span class="st">"CA"</span> <span class="kw">do</span></span>
<span id="cb78-14"><a href="control-flow.html#cb78-14" aria-hidden="true" tabindex="-1"></a>    <span class="cn">Map</span><span class="op">.</span>put(x, <span class="va">:address</span>, y<span class="op">.</span>address)</span>
<span id="cb78-15"><a href="control-flow.html#cb78-15" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb78-16"><a href="control-flow.html#cb78-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-17"><a href="control-flow.html#cb78-17" aria-hidden="true" tabindex="-1"></a>[%{<span class="va">address:</span> <span class="st">"123 Main St"</span>, <span class="va">description:</span> <span class="st">"highway bond"</span>, <span class="va">id:</span> <span class="dv">1</span>, <span class="va">state:</span> <span class="st">"CA"</span>}]</span></code></pre></div>
<p>A shorter syntax using pattern matching to filter directly</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb79-1"><a href="control-flow.html#cb79-1" aria-hidden="true" tabindex="-1"></a>state <span class="op">=</span> <span class="st">"CA"</span></span>
<span id="cb79-2"><a href="control-flow.html#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="control-flow.html#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> x <span class="op">=</span> %{<span class="va">state:</span> <span class="op">^</span>state} <span class="op">&lt;-</span> propositions,</span>
<span id="cb79-4"><a href="control-flow.html#cb79-4" aria-hidden="true" tabindex="-1"></a>      y <span class="op">=</span> %{<span class="va">state:</span> <span class="op">^</span>state} <span class="op">&lt;-</span> locations, <span class="kw">do</span></span>
<span id="cb79-5"><a href="control-flow.html#cb79-5" aria-hidden="true" tabindex="-1"></a>    <span class="cn">Map</span><span class="op">.</span>put(x, <span class="va">:address</span>, y<span class="op">.</span>address)</span>
<span id="cb79-6"><a href="control-flow.html#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="enum-module.html"><span class="header-section-number">5</span> Enum Module</a></div>
<div class="next"><a href="miscellaneous-features.html"><span class="header-section-number">7</span> Miscellaneous Features</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#control-flow"><span class="header-section-number">6</span> Control Flow</a></li>
<li><a class="nav-link" href="#if-else-block"><span class="header-section-number">6.1</span> if-else block</a></li>
<li><a class="nav-link" href="#cond-multiple-if-else-blocks"><span class="header-section-number">6.2</span> cond: multiple if-else blocks</a></li>
<li><a class="nav-link" href="#case-case-when-with-pattern-matching"><span class="header-section-number">6.3</span> case: case when with pattern matching</a></li>
<li><a class="nav-link" href="#with-combine-multiple-clauses"><span class="header-section-number">6.4</span> with: combine multiple clauses</a></li>
<li><a class="nav-link" href="#comprehensions"><span class="header-section-number">6.5</span> comprehensions</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/qiushiyan/elixir-notes/blob/master/control-flow.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/qiushiyan/elixir-notes/edit/master/control-flow.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>elixir-notes</strong>" was written by Qiushi. It was last built on 2022-02-22.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
